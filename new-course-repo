#!/bin/sh

cd `dirname $0`

repo="$1"

mkdir repos/$repo && \
  # create a bare repository
  cd repos/$repo && \
  git init --bare && \
  # clone master branch into courses/ directory
  cd ../../courses && \
  git clone ../repos/$repo -b master && \
  # configure credentials for further use
  cd $repo && \
  git config user.name   "trass autogenerated" && \
  git config user.email  "https://github.com/fizruk/trass" && \
  # clone repo into submits/ directory
  cd ../../submits && \
  git clone ../repos/$repo -b master && \
  # configure credentials for further use
  cd $repo && \
  git config user.name   "trass autogenerated" && \
  git config user.email  "https://github.com/fizruk/trass" &&\
  git checkout -b submits && \
  echo "Here be README" > README.md && \
  git add README.md && \
  git commit -m "initial commit"
  git push -u origin submits

